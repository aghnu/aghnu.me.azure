(()=>{var A={894:function(A,e){var t,n;void 0===(n="function"==typeof(t=function(){const A=document.createElement("canvas"),e=A.getContext("2d"),t={extract:function(t,n,r=(()=>{}),a=(()=>{})){A.width=t.videoWidth,A.height=t.videoHeight;const i=()=>{if(!a()){const A=Date.now();e.drawImage(t,0,0,t.videoWidth,t.videoHeight);const a=e.getImageData(0,0,t.videoWidth,t.videoHeight);new Promise((()=>{r({data:a})})),setTimeout(i,1e3/n-(Date.now()-A))}};i()},checkSupport:(A,e,n)=>{const r=document.createElement("video");let a=!1,i=!1;r.muted=!0,r.autoplay=!0,r.addEventListener("canplay",(o=>{i||(i=!0,r.readyState>=2&&t.extract(r,120,(t=>{a=!0,n(t)?A():e()}),(()=>a)))}),{once:!0}),r.addEventListener("error",(A=>{i||(i=!0,e())}),{once:!0}),r.src="data:video/mp4;base64,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"}};return t})?t.apply(e,[]):t)||(A.exports=n)},259:function(A,e){var t,n;void 0===(n="function"==typeof(t=function(){function A(A){return A.reduce((function(A,e){return 2*A+e}),0)}function e(A){let e=[];for(let t=7;t>=0;t--)e.push(!!(A&1<<t));return e}function t(t,n){n||(n={});let r=function(A){let e=[];for(let n=0;n<A;n++)e.push(t.readBytes(3));return e},a=function(){let A,e;e="";do{A=t.readByte(),e+=t.read(A)}while(0!==A);return e},i=function(r){switch(r.label=t.readByte(),r.label){case 249:r.extType="gce",function(r){t.readByte();let a=e(t.readByte());r.reserved=a.splice(0,3),r.disposalMethod=A(a.splice(0,3)),r.userInput=a.shift(),r.transparencyGiven=a.shift(),r.delayTime=t.readUnsigned(),r.transparencyIndex=t.readByte(),r.terminator=t.readByte(),n.gce&&n.gce(r)}(r);break;case 254:r.extType="com",function(A){A.comment=a(),n.com&&n.com(A)}(r);break;case 1:r.extType="pte",function(A){t.readByte(),A.ptHeader=t.readBytes(12),A.ptData=a(),n.pte&&n.pte(A)}(r);break;case 255:r.extType="app",function(A){t.readByte(),A.identifier=t.read(8),A.authCode=t.read(3),"NETSCAPE"===A.identifier?function(A){t.readByte(),A.unknown=t.readByte(),A.iterations=t.readUnsigned(),A.terminator=t.readByte(),n.app&&n.app.NETSCAPE&&n.app.NETSCAPE(A)}(A):function(A){A.appData=a(),n.app&&n.app[A.identifier]&&n.app[A.identifier](A)}(A)}(r);break;default:r.extType="unknown",function(A){A.data=a(),n.unknown&&n.unknown(A)}(r)}},o=function(i){i.leftPos=t.readUnsigned(),i.topPos=t.readUnsigned(),i.width=t.readUnsigned(),i.height=t.readUnsigned();let o=e(t.readByte());i.lctFlag=o.shift(),i.interlaced=o.shift(),i.sorted=o.shift(),i.reserved=o.splice(0,2),i.lctSize=A(o.splice(0,3)),i.lctFlag&&(i.lct=r(1<<i.lctSize+1)),i.lzwMinCodeSize=t.readByte();let s=a();i.pixels=function(A,e){let t,n,r=0,a=function(A){let t=0;for(let n=0;n<A;n++)e.charCodeAt(r>>3)&1<<(7&r)&&(t|=1<<n),r++;return t},i=[],o=1<<A,s=o+1,c=A+1,l=[],d=function(){l=[],c=A+1;for(let A=0;A<o;A++)l[A]=[A];l[o]=[],l[s]=null};for(;;)if(n=t,t=a(c),t!==o){if(t===s)break;if(t<l.length)n!==o&&l.push(l[n].concat(l[t][0]));else{if(t!==l.length)throw new Error("Invalid LZW code.");l.push(l[n].concat(l[n][0]))}i.push.apply(i,l[t]),l.length===1<<c&&c<12&&c++}else d();return i}(i.lzwMinCodeSize,s),i.interlaced&&(i.pixels=function(A,e){let t=new Array(A.length),n=A.length/e,r=function(n,r){let a=A.slice(r*e,(r+1)*e);t.splice.apply(t,[n*e,e].concat(a))},a=[0,4,2,1],i=[8,8,4,2],o=0;for(let A=0;A<4;A++)for(let e=a[A];e<n;e+=i[A])r(e,o),o++;return t}(i.pixels,i.width)),n.img&&n.img(i)},s=function(){let A={};switch(A.sentinel=t.readByte(),String.fromCharCode(A.sentinel)){case"!":A.type="ext",i(A);break;case",":A.type="img",o(A);break;case";":A.type="eof",n.eof&&n.eof(A);break;default:throw new Error("Unknown block: 0x"+A.sentinel.toString(16))}"eof"!==A.type&&setTimeout(s,0)};(function(){let a={};if(a.sig=t.read(3),a.ver=t.read(3),"GIF"!==a.sig)throw new Error("Not a GIF file.");a.width=t.readUnsigned(),a.height=t.readUnsigned();let i=e(t.readByte());a.gctFlag=i.shift(),a.colorRes=A(i.splice(0,3)),a.sorted=i.shift(),a.gctSize=A(i.splice(0,3)),a.bgColor=t.readByte(),a.pixelAspectRatio=t.readByte(),a.gctFlag&&(a.gct=r(1<<a.gctSize+1)),n.hdr&&n.hdr(a)})(),setTimeout(s,0)}function n(A){this.data=A,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return A instanceof Uint8Array?A[this.pos++]:255&A.charCodeAt(this.pos++)},this.readBytes=function(A){let e=[];for(let t=0;t<A;t++)e.push(this.readByte());return e},this.read=function(A){let e="";for(let t=0;t<A;t++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){let A=this.readBytes(2);return(A[1]<<8)+A[0]}}return function(A,e=(()=>{}),r=(()=>{})){const a=[],i=document.createElement("canvas");let o=null,s=null,c=null,l=null,d=null,p=null,u=null,h={},g=null;function f(){o=null,s=null,p=l,l=null,g=null}function m(){if(!o)return;const A={data:o.getImageData(0,0,h.width,h.height),delay:s};a.push(A),r(A)}function y(A){var e,t;h=A,e=h.width,t=h.height,i.width=e,i.height=t,i.getContext("2d").setTransform(1,0,0,1,0,0)}function w(A){m(),f(),g=A.transparencyGiven?A.transparencyIndex:null,s=A.delayTime,l=A.disposalMethod}function B(A){o||(o=i.getContext("2d"));let e=a.length,t=A.lctFlag?A.lct:h.gct;e>0&&(3===p?null!==d?o.putImageData(a[d].data,0,0):o.clearRect(u.leftPos,u.topPos,u.width,u.height):d=e-1,2===p&&o.clearRect(u.leftPos,u.topPos,u.width,u.height));let n=o.getImageData(A.leftPos,A.topPos,A.width,A.height);A.pixels.forEach((function(A,e){A!==g&&(n.data[4*e+0]=t[A][0],n.data[4*e+1]=t[A][1],n.data[4*e+2]=t[A][2],n.data[4*e+3]=255)})),o.putImageData(n,A.leftPos,A.topPos),u=A}function b(A){f(),console.log(A)}function v(){const A={hdr:y,gce:w,com:()=>{},app:{NETSCAPE:()=>{}},img:B,eof:()=>{m(),e(a)}};try{t(c,A)}catch{b("parsing error")}}var C,M;C=A,(M=new XMLHttpRequest).open("GET",C,!0),"overrideMimeType"in M?M.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in M?M.responseType="arraybuffer":M.setRequestHeader("Accept-Charset","x-user-defined"),M.onload=function(A){200!=this.status&&b("response error"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var e=this.response;e.toString().indexOf("ArrayBuffer")>0&&(e=new Uint8Array(e)),c=new n(e),setTimeout(v,0)},M.onerror=function(){b("request error")},M.send()}})?t.apply(e,[]):t)||(A.exports=n)}},e={};function t(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={exports:{}};return A[n].call(a.exports,a,a.exports,t),a.exports}t.n=A=>{var e=A&&A.__esModule?()=>A.default:()=>A;return t.d(e,{a:e}),e},t.d=(A,e)=>{for(var n in e)t.o(e,n)&&!t.o(A,n)&&Object.defineProperty(A,n,{enumerable:!0,get:e[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(A){if("object"==typeof window)return window}}(),t.o=(A,e)=>Object.prototype.hasOwnProperty.call(A,e),(()=>{var A;t.g.importScripts&&(A=t.g.location+"");var e=t.g.document;if(!A&&e&&(e.currentScript&&(A=e.currentScript.src),!A)){var n=e.getElementsByTagName("script");n.length&&(A=n[n.length-1].src)}if(!A)throw new Error("Automatic publicPath is not supported in this browser");A=A.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=A})(),(()=>{"use strict";function A(A,e,t=!1){const n="@#QB&MN$%Ebao]{/|?*>;:^'`~-,. ",r=[],a=t?cv.matFromImageData(A):cv.imread(A),i=a.cols/a.rows,o=e,s=Math.floor(i*o*1.8),c=new cv.Size(s,o),l=new cv.Mat;cv.resize(a,l,c,0,0,cv.INTER_AREA);const d=new cv.Mat;if(cv.cvtColor(l,d,cv.COLOR_RGBA2GRAY,0),cv.equalizeHist(d,d),l.isContinuous()&&d.isContinuous())for(let A=0;A<l.rows;A++){const e=[];r.push(e);for(let t=0;t<l.cols;t++){const r=l.data[A*l.cols*l.channels()+t*l.channels()],a=l.data[A*l.cols*l.channels()+t*l.channels()+1],i=l.data[A*l.cols*l.channels()+t*l.channels()+2],o=l.data[A*l.cols*l.channels()+t*l.channels()+3],s=d.data[A*d.cols*d.channels()+t*d.channels()],c=n[n.length-1-Math.floor(s/255*(n.length-1))],p=[r,a,i,o];e.push({char:" "===c?"&nbsp":c,rgba:p})}}return a.delete(),l.delete(),d.delete(),r}function e(A,e="",t={}){const n=document.createElement(A);n.innerHTML=e;for(let A in t)n.setAttribute(A,t[A]);return n}var n=t(259),r=t.n(n),a=t(894),i=t.n(a);const o=t.p+"58a68f987df5124724258795fdc55ded.gif",s=t.p+"77ef16f5ce1bf6c6134faf28f77f26ef.gif",c=e("img",""),l=e("video","",{loop:!0}),d=[["Blade-Runner.gif",o],["Blade-Runner-2049.gif",s]];let p;function u(A){let t=0;const n=e("div","",{class:"art-container"});return A.forEach((A=>{t=0;const r=e("div","",{class:"row"});n.appendChild(r),A.forEach((A=>{t++;const n=e("span",A.char,{class:"char"});n.style.color=`rgba(${A.rgba[0]},${A.rgba[1]},${A.rgba[2]},${A.rgba[3]/255})`,r.appendChild(n)}))})),n}function h(){const e=document.querySelector("#img-upload .upload"),t=/(\.jpg|\.jpeg|\.png|\.apng|\.svg|\.bmp|\.webp)$/i,n=/(\.gif)$/i,a=/(\.mp4|\.webm|\.ogg)$/i,o=document.querySelector("#input-prompt");e.value="";let s=null;const h=()=>{s&&s(),s=null},g=(i,d=i)=>{if(t.exec(d))h(),c.src=i,o.innerHTML="&lt"+d+"&gt";else if(n.exec(d))h(),s=function(e,t=!0){return t?function(e){const t=document.getElementById("ascii-art-showcase");let n=null,a=!0,i=!1,o=0;const s=[],c=()=>{const A=o;t.innerHTML="",t.appendChild(s[A][0]),a&&(o=(o+1)%s.length,i||0!==o?n=setTimeout(c,s[A][1]):(o=A,n=setTimeout(c,50)))};return r()(e,(A=>{i=!0}),(e=>{a&&new Promise((()=>{const t=u(A(e.data,35,!0));0===s.length?(s.push([t,10*e.delay]),c()):s.push([t,10*e.delay])}))})),()=>{a=!1,clearTimeout(n)}}(e):function(e){const t=document.getElementById("ascii-art-showcase");let n=null,a=!0;return r()(e,(e=>{const r=e.length;let i=0;const o=[];e.forEach((e=>{const t=A(e.data,35,!0);o.push([u(t),10*e.delay])}));const s=()=>{const A=i;t.innerHTML="",t.appendChild(o[A][0]),a&&(i=(i+1)%r,n=setTimeout(s,o[A][1]))};s()})),()=>{a=!1,clearTimeout(n)}}(e)}(i),o.innerHTML="&lt"+d+"&gt";else if(a.exec(d))if(p)h(),l.src=i,o.innerHTML="&lt"+d+"&gt";else{e.value="";const A=o.innerHTML;o.innerHTML="browser doesn't support video convertion",setTimeout((()=>{o.innerHTML=A}),1500)}else{e.value="";const A=o.innerHTML;o.innerHTML="format is not supported",setTimeout((()=>{o.innerHTML=A}),1500)}};e.addEventListener("change",(A=>{const e=URL.createObjectURL(A.target.files[0]),t=A.target.files[0].name;g(e,t)}),!1),c.addEventListener("load",(e=>{!function(e){const t=document.getElementById("ascii-art-showcase"),n=A(e,35);0!==n.length&&(t.innerHTML="",t.appendChild(u(n)))}(c)})),l.addEventListener("loadeddata",(e=>{l.readyState>=2&&(s=function(e){const t=document.getElementById("ascii-art-showcase");let n=!1;return i().extract(e,120,(e=>{const n=A(e.data,35,!0);0!==n.length&&(t.innerHTML="",t.appendChild(u(n)))}),(()=>n)),e.play(),()=>{e.pause(),n=!0}}(l))}));const f=d[Math.floor(Math.random()*d.length)];g(f[1],f[0])}window.addEventListener("load",(()=>{const t=e("p","",{id:"loading-prompt"}),n=e("script","",{src:"https://www.aghnu.me/static/js/opencv.js",async:!0});let r;document.body.appendChild(t),document.head.appendChild(n);let a=0;const o=["Webpage is loading","Webpage is loading.","Webpage is loading..","Webpage is loading..."];t.style.visibility="visible",r=setInterval((()=>{t.innerHTML=o[a],a=(a+1)%o.length}),500);const s=()=>{const n=()=>{clearInterval(r),function(){const A=e("div","",{id:"app-container"}),t=e("label","",{id:"img-upload"}),n=e("input","",{class:"upload",type:"file"}),r=e("p",p?"UPLOAD<br>JPG \\ PNG \\ GIF \\ MP4":"UPLOAD<br>JPG \\ PNG \\ GIF",{class:"prompt"}),a=e("p","",{id:"input-prompt"}),i=e("div","",{id:"ascii-art-showcase"}),o=e("footer","",{id:"site-footer"}),s=e("p",'Aghnu\'s ASCII Art Generator<br>by Gengyuan Huang<br><a target="_blank" href="https://www.aghnu.me">© 2022 AGHNU.ME</a>',{class:"info"});return o.appendChild(s),t.appendChild(r),t.appendChild(n),A.appendChild(i),A.appendChild(a),A.appendChild(t),A.appendChild(o),document.body.appendChild(A),A}().style.visibility="visible",t.style.visibility="hidden",h()};i().checkSupport((()=>{p=!0,n()}),(()=>{p=!1,n()}),(e=>{const t=A(e.data,1,!0);return 0!==t.length&&254===t[0][0].rgba[0]}))};n.addEventListener("load",(()=>{setTimeout((()=>{cv.getBuildInformation?s():cv.onRuntimeInitialized=s}),500*o.length)}))}))})()})();