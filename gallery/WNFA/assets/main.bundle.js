(()=>{"use strict";const t={pointerX:0,pointerY:0,rotateDeg:0};const e=[],o="https://wnfa-interactive-art-project.github.io/hangzhou_060122/";window.addEventListener("load",(function(){const n=document.querySelector("#site-interactive"),r=document.querySelector("#site-interactive .room"),i=document.querySelector("#site-interactive .room .gallery");(function(e,o,n){const r=e.getBoundingClientRect();t.pointerX=r.left+r.width/2,t.pointerY=r.top+r.height/2,n.onmousemove=e=>{t.pointerX=e.clientX,t.pointerY=e.clientY},n.ontouchmove=e=>{t.pointerX=e.touches[0].clientX,t.pointerY=e.touches[0].clientY},setInterval((()=>{t.rotateDeg=t.rotateDeg+.6}),100),setInterval((()=>{o.style.transform=`rotateY(${t.rotateDeg}deg)`,function(e,o){const n=e.getBoundingClientRect(),r=o.getBoundingClientRect(),i=r.height/r.width,a=10*i,s=10/i,c=n.left+n.width/2,l=n.top+n.height/2,h=t.pointerX-c,d=t.pointerY-l,m=h/(r.width/2),u=d/(r.height/2),g=m*a/((r.height+600)/600),p=-u*s/((r.width+600)/600);e.style.transform=`rotateX(${p}deg) rotateY(${g}deg)`}(e,n)}),1e3/12)})(r,i,n),function(t){for(let o=0;o<6;o++){const n=60+60*o,r=document.createElement("div");r.classList.add("wall"),r.style.transform=`rotateY(${n}deg) translateX(-50%)`,e.push(r),t.appendChild(r)}var n;n=t=>{const n=t.results.total;let r=0;const i=[],a=()=>{setTimeout((()=>{new Promise((()=>{const t=document.createElement("img"),a=50*Math.random(),s=80*Math.random(),c=360*Math.random(),l=8*Math.random()+2;if(t.classList.add("poster"),t.style.top=s+"%",t.style.right=a+"%",t.style.transform=`rotateZ(${c}deg) rotateY(${c}deg)`,t.style.width=l+"em",t.src=o+"results/"+Math.floor(Math.random()*n+1)+".jpg",t.onmouseenter=()=>{t.style.opacity=1},t.onmouseleave=()=>{t.style.opacity=.9},i.push(t),e[Math.floor(Math.random()*e.length)].appendChild(t),r++,r>=20){const t=i.shift();t.parentElement.removeChild(t)}})),a()}),r<20?250:1e3*Math.random()+1e3)};a()},fetch(o+"META.json").then((t=>{200===t.status&&t.json().then((t=>{n(t)}))})).catch((t=>{console.log("error",t)}))}(i)}))})();