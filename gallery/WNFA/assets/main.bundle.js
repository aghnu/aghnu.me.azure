(()=>{"use strict";const t={pointerX:0,pointerY:0,rotateDeg:0};const e=[],o="https://wnfa-interactive-art-project.github.io/hangzhou_060122/";window.addEventListener("load",(function(){const n=document.querySelector("#site-interactive"),r=document.querySelector("#site-interactive .room"),i=document.querySelector("#site-interactive .room .gallery");(function(e,o,n){const r=e.getBoundingClientRect();t.pointerX=r.left+r.width/2,t.pointerY=r.top+r.height/2,n.onmousemove=e=>{t.pointerX=e.clientX,t.pointerY=e.clientY},n.ontouchmove=e=>{t.pointerX=e.touches[0].clientX,t.pointerY=e.touches[0].clientY},setInterval((()=>{t.rotateDeg=t.rotateDeg+.6}),100),setInterval((()=>{o.style.transform=`rotateY(${t.rotateDeg}deg)`,function(e,o){const n=e.getBoundingClientRect(),r=o.getBoundingClientRect(),i=r.height/r.width,a=10*i,s=10/i,c=n.left+n.width/2,l=n.top+n.height/2,d=t.pointerX-c,h=t.pointerY-l,g=d/(r.width/2),m=h/(r.height/2),p=g*a/((r.height+600)/600),u=-m*s/((r.width+600)/600);e.style.transform=`rotateX(${u}deg) rotateY(${p}deg)`}(e,n)}),1e3/12)})(r,i,n),function(t){for(let o=0;o<6;o++){const n=60+60*o,r=document.createElement("div");r.classList.add("wall"),r.style.transform=`rotateY(${n}deg) translateX(-50%)`,e.push(r),t.appendChild(r)}var n;n=t=>{const n=t.posters.total;for(let t=1;t<=n;t++)new Promise((()=>{const n=document.createElement("img"),r=50*Math.random(),i=80*Math.random(),a=360*Math.random(),s=8*Math.random()+3;n.classList.add("poster"),n.style.top=i+"%",n.style.right=r+"%",n.style.transform=`rotateZ(${a}deg) rotateY(${a}deg)`,n.style.width=s+"em",n.src=o+"posters/"+t+".jpg",n.onmouseenter=()=>{n.style.opacity=1},n.onmouseleave=()=>{n.style.opacity=.8},e[Math.floor(Math.random()*e.length)].appendChild(n)}))},fetch(o+"META.json").then((t=>{200===t.status&&t.json().then((t=>{n(t)}))})).catch((t=>{console.log("error",t)}))}(i)}))})();